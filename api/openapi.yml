---
openapi: 3.0.4
info:
  title: Swagger Petstore - OpenAPI 3.0
  description: This is a sample Pet Store Server based on the OpenAPI 3.0 specification.
  version: 1.0.26
servers:
  - url: "/api/v1"
security:
  - bearerAuth: []
paths:
  "/animal-categories":
    get:
      tags:
        - animal-categories
      summary: Find animal-category using name
      description: Find animal-category using name. 
      operationId: findAnimalCategory
      parameters:
        - name: name
          in: query
          required: true
          description: Name of animal category
          schema:
            "$ref": "#/components/schemas/AnimalCategoryName"
      responses:
        "200":
          "$ref": "#/components/responses/AnimalCategoryResponse"
        default:
          "$ref": "#/components/responses/ApiResponse"
    post:
      tags:
        - animal-categories
      summary: Add new animal-category to the store.
      description: Add new animal-category to the store.
      operationId: addAnimalCategory
      requestBody:
        "$ref": "#/components/requestBodies/AnimalCategoryRequest"
      responses:
        "201":
          "$ref": "#/components/responses/AnimalCategoryResponse"
        default:
          "$ref": "#/components/responses/ApiResponse"
  "/animal-categories/{animalCategoryId}":
    put:
      tags:
        - animal-categories
      summary: Replace existing animal-category data using Id.
      description: Replace existing animal-category data using Id.
      operationId: replaceAnimalCategory
      parameters:
        - description: ID of animal-category that needs to be replaced
          "$ref": "#/components/parameters/AnimalCategoryIdParameter"
      requestBody:
        "$ref": "#/components/requestBodies/AnimalCategoryRequest"
      responses:
        "200":
          "$ref": "#/components/responses/AnimalCategoryResponse"
        default:
          "$ref": "#/components/responses/ApiResponse"
    delete:
      tags:
        - animal-categories
      summary: Delete an animal-category.
      description: Delete an animal-category.
      operationId: deleteAnimalCategory
      parameters:
        - description: Animal-category id to delete
          "$ref": "#/components/parameters/AnimalCategoryIdParameter"
      responses:
        "200":
          description: Animal-category deleted
          headers:
            X-Request-Id:
              "$ref": "#/components/headers/X-Request-Id"
        default:
          "$ref": "#/components/responses/ApiResponse"
  "/pets":
    get:
      tags:
        - pets
      summary: Find Pets using name, status, tags.
      description: Find Pets using name, status, tags. **Atleast one of the parameters is required**
      operationId: findPets
      parameters:
        - name: name
          in: query
          required: false
          description: Name of pet
          schema:
            "$ref": "#/components/schemas/PetName"
        - name: status
          in: query
          description: Status values that need to be considered for filter
          required: false
          explode: true
          schema:
            type: array 
            items:
              "$ref": "#/components/schemas/PetStatus"
        - name: tags
          in: query
          description: Tags to filter by
          required: false
          explode: true
          schema:
            "$ref": "#/components/schemas/PetTags"
        - "$ref": "#/components/parameters/Cursor"
        - "$ref": "#/components/parameters/Limit"
      responses:
        "200":
          "$ref": "#/components/responses/PetResponseArray"
        default:
          "$ref": "#/components/responses/ApiResponse"
    post:
      tags:
        - pets
      summary: Add new pet to the store.
      description: Add new pet to the store.
      operationId: addPet
      requestBody:
        "$ref": "#/components/requestBodies/PetRequest"
      responses:
        "202":
          description: "Request Accepted"
          headers:
            X-Request-Id:
              "$ref": "#/components/headers/X-Request-Id"
        default:
          "$ref": "#/components/responses/ApiResponse"
  "/pets/{petId}":
    get:
      tags:
        - pets
      summary: Find pet by ID.
      description: Returns a single pet.
      operationId: getPetById
      parameters:
        - description: ID of pet to return
          "$ref": "#/components/parameters/PetIdParameter"
      responses:
        "200":
          "$ref": "#/components/responses/PetResponse"                
        default:
          "$ref": "#/components/responses/ApiResponse"
    put:
      tags:
        - pets
      summary: Replace existing pet data using Id.
      description: Replace existing pet data using Id.
      operationId: replacePet
      parameters:
        - description: ID of pet that needs to be replaced
          "$ref": "#/components/parameters/PetIdParameter"
      requestBody:
        "$ref": "#/components/requestBodies/PetRequest"
      responses:
        "202":
          description: "Request Accepted"
          headers:
            X-Request-Id:
              "$ref": "#/components/headers/X-Request-Id"
        default:
          "$ref": "#/components/responses/ApiResponse"
    delete:
      tags:
        - pets
      summary: Delete a pet.
      description: Delete a pet.
      operationId: deletePet
      parameters:
        - description: Pet id to delete
          "$ref": "#/components/parameters/PetIdParameter"
      responses:
        "200":
          description: Pet deleted
          headers:
            X-Request-Id:
              "$ref": "#/components/headers/X-Request-Id"
        default:
          "$ref": "#/components/responses/ApiResponse"
  "/pets/{petId}/images":
    post:
      tags:
        - pets
      summary: Upload a new image for a pet.
      description: Upload a new image for a pet.
      operationId: uploadPetImage
      parameters:
        - description: ID of pet to upload image for
          "$ref": "#/components/parameters/PetIdParameter"
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - photos
              properties:
                photos: 
                  type: array
                  description: Pet images (up to 10)
                  maxItems: 10
                  items:
                    type: string
                    description: "Min size: 1B, Max size: 10MB"
                    format: binary
                    example: binary string representation of jpeg image
            encoding:
              photos:
                contentType: image/jpeg
                explode: true
      responses:
        "202":
          description: "Accepted Request"
          headers:
            X-Request-Id:
              "$ref": "#/components/headers/X-Request-Id"
        default:
          "$ref": "#/components/responses/ApiResponse"
  "/pets/{petId}/images/{imageId}":
    get:
      tags:
        - pets
      summary: Get a pet image using ID.
      description: Get a pet image using ID.
      operationId: getImageByPetId
      parameters:
        - description: ID of pet
          "$ref": "#/components/parameters/PetIdParameter"
        - description: ID of image
          "$ref": "#/components/parameters/ImageIdParameter"
      responses:
        "200":
          description: Successful response
          headers:
            X-Request-Id:
              "$ref": "#/components/headers/X-Request-Id"
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
                example: binary string representation of jpeg image
        default:
          "$ref": "#/components/responses/ApiResponse"
    delete:
      tags:
        - pets
      summary: Delete a pet image.
      description: Delete a pet image.
      operationId: deletePetImage
      parameters:
        - description: ID of pet
          "$ref": "#/components/parameters/PetIdParameter"
        - description: ID of image
          "$ref": "#/components/parameters/ImageIdParameter"
      responses:
        "200":
          description: Pet image deleted
          headers:
            X-Request-Id:
              "$ref": "#/components/headers/X-Request-Id"
        default:
          "$ref": "#/components/responses/ApiResponse"
  "/store/orders":
    get:
      tags:
        - orders
      summary: Find user Orders using status.
      description: Find user Orders using status.
      operationId: findOrders
      parameters:
        - name: status
          in: query
          description: Status values that need to be considered for filter
          required: false
          explode: true
          schema:
            type: array 
            items:
              "$ref": "#/components/schemas/OrderStatus"
        - name: afterDate
          in: query
          description: Filter orders placed after this date
          required: false
          schema:
            type: string
            format: date-time
        - "$ref": "#/components/parameters/Cursor"
        - "$ref": "#/components/parameters/Limit"
      responses:
        "200":
          "$ref": "#/components/responses/OrderResponseArray"
        default:
          "$ref": "#/components/responses/ApiResponse"
    post:
      tags:
        - orders
      summary: Place orders for pets.
      description: Place new orders in the store.
      operationId: placeOrders
      requestBody:
        content:
          application/json:
            schema:
              "$ref": "#/components/requestBodies/OrderRequest"
      responses:
        "201":
          description: successful operation
          content:
            application/json:
              schema:
                "$ref": "#/components/responses/OrderResponseArray"
        default:
          "$ref": "#/components/responses/ApiResponse"
  "/store/orders/{orderId}":
    get:
      tags:
        - orders
      summary: Find purchase order by ID.
      operationId: getOrderById
      parameters: 
        - description: ID of order that needs to be fetched
          "$ref": "#/components/parameters/OrderIdParameter"
      responses:
        "200":
          description: successful operation
          content:
            application/json:
              schema:
                "$ref": "#/components/responses/OrderResponse"
        default:
          "$ref": "#/components/responses/ApiResponse"
    delete:
      tags:
        - orders
      summary: Delete purchase order by identifier.
      operationId: deleteOrder
      parameters:
        - description: ID of the order that needs to be deleted
          "$ref": "#/components/parameters/OrderIdParameter"
      responses:
        "200":
          description: Order deleted
          headers:
            X-Request-Id:
              "$ref": "#/components/headers/X-Request-Id"
        default:
          "$ref": "#/components/responses/ApiResponse"
  # "/user":
  #   post:
  #     tags:
  #     - user
  #     summary: Create user.
  #     description: This can only be done by the logged in user.
  #     operationId: createUser
  #     requestBody:
  #       description: Created user object
  #       content:
  #         application/json:
  #           schema:
  #             "$ref": "#/components/schemas/User"
  #     responses:
  #       "200":
  #         description: successful operation
  #         content:
  #           application/json:
  #             schema:
  #               "$ref": "#/components/schemas/User"
  #       default:
  #         description: Unexpected error
  # "/user/{username}":
  #   get:
  #     tags:
  #     - user
  #     summary: Get user by user name.
  #     description: Get user detail based on username.
  #     operationId: getUserByName
  #     parameters:
  #     - name: username
  #       in: path
  #       description: The name that needs to be fetched. Use user1 for testing
  #       required: true
  #       schema:
  #         type: string
  #     responses:
  #       "200":
  #         description: successful operation
  #         content:
  #           application/json:
  #             schema:
  #               "$ref": "#/components/schemas/User"
  #       "400":
  #         description: Invalid username supplied
  #       "404":
  #         description: User not found
  #       default:
  #         description: Unexpected error
  #   put:
  #     tags:
  #     - user
  #     summary: Update user resource.
  #     description: This can only be done by the logged in user.
  #     operationId: updateUser
  #     parameters:
  #     - name: username
  #       in: path
  #       description: name that need to be deleted
  #       required: true
  #       schema:
  #         type: string
  #     requestBody:
  #       description: Update an existent user in the store
  #       content:
  #         application/json:
  #           schema:
  #             "$ref": "#/components/schemas/User"
  #     responses:
  #       "200":
  #         description: successful operation
  #       "400":
  #         description: bad request
  #       "404":
  #         description: user not found
  #       default:
  #         description: Unexpected error
  #   delete:
  #     tags:
  #     - user
  #     summary: Delete user resource.
  #     description: This can only be done by the logged in user.
  #     operationId: deleteUser
  #     parameters:
  #     - name: username
  #       in: path
  #       description: The name that needs to be deleted
  #       required: true
  #       schema:
  #         type: string
  #     responses:
  #       "200":
  #         description: User deleted
  #       "400":
  #         description: Invalid username supplied
  #       "404":
  #         description: User not found
  #       default:
  #         description: Unexpected error
components:
  schemas:
    Id: 
      type: string
      minLength: 1
      maxLength: 45
    PetName:
      type: string
      example: max
      minLength: 1
      maxLength: 100
      pattern: "^[a-z\\- ]+$"
    AnimalCategoryName:
      type: string
      example: dogs
      minLength: 1
      maxLength: 100
      pattern: "^[a-z0-9\\- ]+$"
    PetTags: 
      type: array
      minItems: 1
      maxItems: 50
      items:
        type: string
        minLength: 1
        maxLength: 20
    PetStatus:
      type: string
      description: pet status in the store
      default: available
      enum:
        - available
        - pending
        - sold      
    Pet:
      required:
        - name
        - category_id
        - price
      type: object
      properties:
        name:
          "$ref": "#/components/schemas/PetName"
        price:
          type: string
          format: decimal
          pattern: "^\\d+(\\.\\d{1,2})?$"
          example: "29.99"
          minLength: 1
          description: "Price in USD. Must be positive with max 2 decimal places."
        category_id:
          type: string
          minLength: 1
          maxLength: 45
        tags:
          "$ref": "#/components/schemas/PetTags"
        status:
          "$ref": "#/components/schemas/PetStatus"
    PetResp:
      allOf:
        - type: object
          properties:
            id:
              "$ref": "#/components/schemas/Id"
            photo_uris:
              type: array
              items:
                description: URI of pet image
                type: string
                format: uri
                example: /pet/{petId}/image/{imageId}
        - "$ref": "#/components/schemas/Pet"
        - "$ref": "#/components/schemas/DateTimeMetadata"
    OrderStatus:
      type: string
      description: order status
      default: placed
      enum:
        - placed
        - cancelled
        - approved
        - delivered 
    OrderResp: 
      allOf:
        - type: object
          properties:
            id:
              "$ref": "#/components/schemas/Id"
            pet_id:
              "$ref": "#/components/schemas/Id"
            status:
              "$ref": "#/components/schemas/OrderStatus"
            shippedDate:
              type: string
              format: date-time
              nullable: true
        - "$ref": "#/components/schemas/DateTimeMetadata"
    DateTimeMetadata:
      type: object 
      properties:
        created_at:
          type: string
          format: date-time
          description: Date when the pet was created in the store
        updated_at:
          type: string
          format: date-time
          nullable: true
          description: Date when the pet was last updated
    # User:
    #   type: object
    #   properties:
    #     id:
    #       type: integer
    #       format: int64
    #       example: 10
    #     username:
    #       type: string
    #       example: theUser
    #     firstName:
    #       type: string
    #       example: John
    #     lastName:
    #       type: string
    #       example: James
    #     email:
    #       type: string
    #       example: john@email.com
    #     password:
    #       type: string
    #       example: "12345"
    #     phone:
    #       type: string
    #       example: "12345"
    #     userStatus:
    #       type: integer
    #       description: User Status
    #       format: int32
    #       example: 1
  requestBodies:
    AnimalCategoryRequest:
      description: Animal Category object that needs to be added to the store
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - name
            properties: 
              name:
                description: Name of the animal category
                "$ref": "#/components/schemas/AnimalCategoryName"
    PetRequest:
      required: true
      content:
        multipart/form-data:
          schema:
            type: object
            required:
              - pet
            properties: 
              pet:
                description: Pet data 
                "$ref": "#/components/schemas/Pet"
              photos: 
                type: array
                description: Pet images (up to 10)
                maxItems: 10
                items:
                  type: string
                  description: "Min size: 1B, Max size: 10MB"
                  format: binary
                  example: binary string representation of jpeg image
          encoding:
            pet:
              contentType: application/json
            photos:
              contentType: image/jpeg
              explode: true
    OrderRequest:
      required: true
      content:
        application/json:
          schema:
            type: array 
            minItems: 1
            maxItems: 10
            items:
              type: object
              required:
                - petId
              properties:
                petId:
                  "$ref": "#/components/schemas/Id"
  responses:
    AnimalCategoryResponse: 
      description: "Successful Animal Category response"
      headers:
        X-Request-Id:
          "$ref": "#/components/headers/X-Request-Id"
      content:
        application/json:
          schema: 
            allOf:
              - type: object
                properties:
                  id:
                    "$ref": "#/components/schemas/Id"
                  name: 
                    "$ref": "#/components/schemas/AnimalCategoryName"
              - "$ref": "#/components/schemas/DateTimeMetadata"
    PetResponse: 
      description: "Successful Pet object response"
      headers:
        X-Request-Id:
          "$ref": "#/components/headers/X-Request-Id"
      content:
        application/json:
          schema: 
            "$ref": "#/components/schemas/PetResp"
    PetResponseArray:
      description: "Successful Pet array response"
      headers:
        X-Request-Id:
          "$ref": "#/components/headers/X-Request-Id"
        X-Next-Cursor:
          "$ref": "#/components/headers/X-Next-Cursor"
      content:
        application/json:
          schema:
            type: object
            properties:
              count:
                type: integer
                description: Total number of pets
              pets:
                type: array
                items:
                  "$ref": "#/components/schemas/PetResp"
    OrderResponse:
      description: "Successful Order response"
      headers:
        X-Request-Id:
          "$ref": "#/components/headers/X-Request-Id"
      content:
        application/json:
          schema:
            "$ref": "#/components/schemas/OrderResp"
    OrderResponseArray:
      description: "Successful Order array response"
      headers:
        X-Request-Id:
          "$ref": "#/components/headers/X-Request-Id"
        X-Next-Cursor:
          "$ref": "#/components/headers/X-Next-Cursor"
      content:
        application/json:
          schema:
            type: object
            properties:
              count:
                type: integer
                description: Total number of pets
              pets:
                type: array
                items:
                  "$ref": "#/components/schemas/OrderResp"
    ApiResponse:
      description: "Generic API Response"
      headers:
        X-Request-Id:
          "$ref": "#/components/headers/X-Request-Id"
      content:
        application/json:
          schema:
            type: object
            properties:
              action:
                type: string
              message:
                type: string
  parameters:
    AnimalCategoryIdParameter:
      name: animalCategoryId
      in: path
      required: true
      schema:
        "$ref": "#/components/schemas/Id"    
    PetIdParameter:
      name: petId
      in: path
      required: true
      schema:
        "$ref": "#/components/schemas/Id"
    ImageIdParameter:
      name: imageId
      in: path
      required: true
      schema:
        "$ref": "#/components/schemas/Id"
    OrderIdParameter:
      name: orderId
      in: path
      required: true
      schema:
        "$ref": "#/components/schemas/Id"
    Cursor:
      name: cursor
      in: query
      description: Cursor for pagination (from previous response)
      required: false
      schema:
        type: string
        minLength: 1
        maxLength: 1000
    Limit:
      name: limit
      in: query
      description: Number of items to return
      required: false
      schema:
        type: integer
        minimum: 10
        maximum: 50
        default: 20
  headers:
    X-Next-Cursor:
      description: "Cursor for the next page (null if no more pages)"
      schema:
        type: string
        nullable: true
    X-Request-Id:
      description: "Unique request identifier for tracing"
      schema:
        type: string
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer          
      bearerFormat: JWT 
      description: "JWT Bearer token"
